DECLARE

LVC_SQLLDR_BATFILE_TEMPLATE VARCHAR2(5000);
LVC_SQLLDR_SHFILE_TEMPLATE  VARCHAR2(5000);

BEGIN
LVC_SQLLDR_BATFILE_TEMPLATE := q'{sqlldr QC_MASTER/<password>@PROD CONTROL=D:\MIFIN_SETUP\Batch\Batch_Files\Batch_Upload_[UPLOAD_ID]\CTL_[UPLOAD_ID].CTL direct=y columnarrayrows=1000, LOG=D:\MIFIN_SETUP\Batch\Batch_Files\Batch_Upload_[UPLOAD_ID]\LOG_[UPLOAD_ID].TXT\n
echo UPDATE QT_BATCH_UPLOAD SET UPLOAD_STATUS = 20,STATUS_MESSAGE = 'READY TO VALIDATE'  WHERE UPLOAD_ID = [UPLOAD_ID]; > SET_STATUS_[UPLOAD_ID].SQL\n
echo commit; >> SET_STATUS_[UPLOAD_ID].SQL\n
echo exit; >> SET_STATUS_[UPLOAD_ID].SQL\n
sqlplus QC_MASTER/<password>@PROD @SET_STATUS_[UPLOAD_ID].SQL\n}';
LVC_SQLLDR_SHFILE_TEMPLATE := q'{sqlldr QC_MASTER/<password>@MIFINPDB CONTROL=CTL_[UPLOAD_ID].ctl direct=y columnarrayrows=1000 silent=all  \n
echo -e "UPDATE QT_BATCH_UPLOAD SET UPLOAD_STATUS = 20 WHERE UPLOAD_ID = [UPLOAD_ID]; \n
commit; \n
exit; \n
" > SET_STATUS_[UPLOAD_ID].SQL \n
sqlplus QC_MASTER/<password>@MIFINPDB @SET_STATUS_[UPLOAD_ID].SQL}';

  UPDATE QC_MASTER.QM_BATCH_HDR BH
     SET BH.SQLLDR_BATFILE_TEMPLATE = LVC_SQLLDR_BATFILE_TEMPLATE,
        BH.SQLLDR_SHFILE_TEMPLATE  = LVC_SQLLDR_SHFILE_TEMPLATE
           WHERE BH.MODULE_ID ='BH00000505';

END;
